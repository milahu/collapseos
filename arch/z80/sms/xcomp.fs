\ SMS with 8K of onboard RAM
\ Memory register at the end of RAM. Must not overwrite
8 CONSTS $dd00 RS_ADDR $ddca PS_ADDR $c000 HERESTART
         $bf TMS_CTLPORT $be TMS_DATAPORT
         $3f CPORT_CTL $dc CPORT_D1 $dd CPORT_D2
RS_ADDR $90 - VALUE SYSVARS
SYSVARS $80 + VALUE GRID_MEM
SYSVARS $83 + VALUE CPORT_MEM
SYSVARS $84 + VALUE PAD_MEM
ARCHM XCOMP FONTC 
45 LOAD  \ Sega ROM signer
Z80A XCOMPC Z80C COREL 
CREATE ~FNT CPFNT7x7
335 337 LOADR ( TMS9918 )
350 352 LOADR ( VDP )
GRIDSUB
368 369 LOADR ( SMS ports )
355 358 LOADR ( PAD )
: INIT VDP$ GRID$ PAD$ (im1) ;
XWRAP
$4000 OALLOT XORG 1 ( 16K ) segasig
